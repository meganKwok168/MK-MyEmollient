<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=, initial-scale=1.0">
    <title>Quiz</title>
</head>
<style>

    .slideActive {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center; 
    height: 80vh;
    }
    .slide{
        display: none;
    }

    .cell-container {
        display: flex;
        flex-wrap: wrap;
        max-width: 1200px;
        margin: 0 auto;
        width: 100%;
    }

    .cell, .descriptCell {
        flex: 0 0 50%;
        box-sizing: border-box;
        /* padding: 10px; */
    }

    .descript{
        padding-left: 5vw;
        padding-right: 5vw;
        line-height: 30px;
        text-align: left;
    }

    .imgs {
        width: 100%;
        position: relative;
    }

    .imgs img {
        width: 100%;
        height: auto;
        display: block;
        object-fit: cover;
    }

    .un {
        position: relative;
        z-index: 1;
    }

    .deux {
        position: absolute;
        top: 0;
        left: 0;
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: 2;
    }

    .imgs:hover .deux {
        opacity: 1;
    }

    .overlay-btn {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        
        background-color: white;
        color: black;
        text-decoration: none;
        padding: 12px 32px;
        font-size: 16px;
        font-weight: 500;
        letter-spacing: 0.15em;
        text-transform: uppercase;

        border: none;
        border-radius: 0;
        box-shadow: none;
        
        z-index: 3;
        transition: background-color 0.3s ease, color 0.3s ease;
    }

    .overlay-btn:hover {
        background-color: black;
        color: white;
    }



    .name{
        text-decoration: none;
        color: white;
        font-size: 40px;
        /* font-weight: bold; */

    }

    .descriptCell{
        background-color: #3c3c3c;
        color: white;
        display: flex;
        flex-direction: column;
        justify-content: center; /* vertical centering */
        align-items: center;     /* horizontal centering */
        padding: 20px;   
        text-align: center;
    }

    .name:visited {
        color: white;
    }

    /* Responsive stacking */
    @media (max-width: 768px) {

        .cell, .descriptCell {
            flex: 0 0 100%;  /* full width */
        }

        .descriptCell {
            padding-left: 5vw;   /* optional: keep some padding */
            padding-right: 5vw;
            height: 100vw;  /* so that the description box will still be a square */
        }
    }


    /* Hide native radio/checkbox */
input[type="radio"],
input[type="checkbox"] {
    display: none;
}

.question-text {
    font-size: 1.2rem;
    margin-bottom: 15px;
    text-align: center;
    padding: 15px;
    width: 50vw;
    color: black;
}

.options {
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
    justify-content: center;
    max-width: 75vw;
    margin: 0 auto;
}

.option-btn {
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: none;
    color: black;
    padding: 12px 25px;
    /* border-radius: 8px; */
    border: 2px solid black;
    /* height: 5vh; */
    cursor: pointer;
    transition: all 0.2s ease-in-out;
    font-family: inherit;
    text-align: center;
    width: 20vw;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2); 
}

.option-btn:hover {
    background-color: rgba(114,125,101,82);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5); 
}

/* Selected state */
input[type="radio"]:checked + .option-btn,
input[type="checkbox"]:checked + .option-btn {
    background-color:  rgba(114,125,101,82);
    color: black;
    border: 2px solid black;
}

.buttons {
    display: flex;              
    justify-content: center;      
    align-items: center;         
    gap: 20px;                  
    padding-top: 5vh;
}


.prevNextButtons {
    display: flex;
    align-items: center;
    justify-content: center;

    border-radius: 8px;
    height: 8vh;
    min-width: 8vh;
    padding: 0 12px;
    border: none;
    background-color:  rgb(238,238,238)  ;
    color: black;
    cursor: pointer;
    font-family: inherit;
    font-size: 1rem;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    transition: all 0.2s ease-in-out;
}

.prevNextButtons:hover {
    background-color: rgb(114,125,101);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
    color: white;
}

.prevNextButtons:disabled {
    background-color: rgba(238,238,238,70) ;
    cursor: not-allowed;
    box-shadow: none;
    color: black;
}

body{
    background-color: white;
}
</style>
<body>
    <div id="display"></div>
</body>
</html>

<script>//question modes
let all_that_apply = 0;
let choose_one = 1;

const questions = [
    {
        "question": "How would you describe your skin? (Choose all that apply)",
        "answers": [
            "Dry", 
            "Sensitive", 
            "Flaky", 
            "Itchy", 
            "Rough", 
            "Ashy", 
            "None of the above, just want to glow!"],
        "question_mode": all_that_apply
    },
    {
        "question": "Do you have any specific issues you would like to address?",
        "answers": [
            "Eczema", 
            "Psoriasis", 
            "Stretch Marks", 
            "Cracked Heels", 
            "Skin Elasticity", 
            "Dark Spots/ Hyperpigmentation", 
            "Muscle Tension", 
            "Hot Flashes", 
            "Overheating", 
            "Sunburns",          
            "None of the above"],
        "question_mode": all_that_apply
    },
    {
        "question": "How is your sleep?",
        "answers": [
            "I have trouble falling alseep at night.",
            "I wish I had more energy in the mornings.",
            "No complaints!"
        ],
        "question_mode": choose_one
    },
    {
        "question": "What's your relationship to fitness?",
        "answers": [
            "I'm passionate about staying fit through exercise.",
            "I love to hike and stay active by doing outdoor activities.",
            "I get my steps in by traveling to new destinations.",
            "I'm a homebody."
        ],
        "question_mode": choose_one
    },
    {
        "question": "What kind of mood do you prefer?",
        "answers": [
            "Refreshing",
            "Calming",
            "Grounding",
            "Warm & comforting",
            "Clean & simple",
            "None, I prefer fragrance-free skincare"
        ],
        "question_mode": choose_one
    }
]

const products = [
    {
        "name": "Lemon + Sage Body Butter ",
        "link": "https://myemollient.com/collections/lemon-sage",
        "imgUn": "https://myemollient.com/cdn/shop/files/Lemon_Sage_Body_Butter_for_Dry_Skin_and_Ec_1296x.jpg?v=1728704501",
        "imgDeux": "https://myemollient.com/cdn/shop/files/lemon_and_sage_body_butter_1296x.jpg?v=1728519251",
        "descript": "Infused with essential oils of lemon and sage, this butter not only pampers your skin but also envelops you in a rich, uplifting fragrance, providing a comforting experience with every use.",
        "choices": [
            {
                "question": 1,
                "answer": 5,
                "score": 1
            },
            {
                "question": 1,
                "answer": 5,
                "score": 1
            },
            {
                "question": 2,
                "answer": 1,
                "score": 1
            },
            {
                "question": 3,
                "answer": 0,
                "score": 1
            },
            {
                "question": 4,
                "answer": 2,
                "score": 3
            },
        ]
    },

    {
        "name": "Lavender Body Butter",
        "link": "https://myemollient.com/collections/lavender-body-butter",
        "imgUn": "https://myemollient.com/cdn/shop/files/handmade-lavender-body-butter_2700x.jpg?v=1747099010",
        "imgDeux": "https://myemollient.com/cdn/shop/products/my-emollient-dry-skin-solution_2700x.jpg?v=1747099010",
        "descript": "Experience the best body butter for dry, sensitive, and eczema-prone skin.",
        "choices": [
            {
                "question": 2,
                "answer": 0,
                "score": 1
            },
            {
                "question": 4,
                "answer": 1,
                "score": 3
            }
        ]
        
    },
    {
        "name": "Almond + Vanilla Body Butter",
        "link": "https://myemollient.com/collections/almond-vanilla-body-butter",
        "imgUn": "https://myemollient.com/cdn/shop/files/almond-vanilla-body-butter-orgnanic-moisturizer_1296x.jpg?v=1747415007",
        "imgDeux": "https://myemollient.com/cdn/shop/files/almond-vanilla-body-butter-jar-mango-butter-almonds_2700x.jpg?v=1755053852",
        "descript": "Experience the ultimate in moisture with our handcrafted Almond + Vanilla Whipped Body Butterâ€”a rich, non-greasy formula made with 7 skin-loving ingredients. ",
        "choices": [
            {
                "question": 1,
                "answer": 2,
                "score": 1
            },
            {
                "question": 4,
                "answer": 3,
                "score": 3
            }
        ]
    },
    {
        "name": "Body Butter for Sensitive Skin",
        "link": "https://myemollient.com/collections/body-butter-for-sensitive-skin",
        "imgUn": "https://myemollient.com/cdn/shop/files/body_butter_for_sensitive_skin_and_eczema_1296x.jpg?v=1729980179",
        "imgDeux": "https://myemollient.com/cdn/shop/files/sensitive-skin-body-butter-with-kokum-and-aloe._2700x.jpg?v=1755053048",
        "descript": "This lightly scented body butter is crafted for those with sensitive skin who need a little extra careâ€”including those managing dry patches or prone to eczema.",
        "choices": [
            {
                "question": 0,
                "answer": 1,
                "score": 2
            },
            {
                "question": 0,
                "answer": 2,
                "score": 1
            },
            {
                "question": 0,
                "answer": 3,
                "score": 1
            },
            {
                "question": 1,
                "answer": 0,
                "score": 10
            },
            {
                "question": 1,
                "answer": 9,
                "score": 1
            },
            {
                "question": 4,
                "answer": 3,
                "score": 1
            },
            {
                "question": 4,
                "answer": 4,
                "score": 1
            }
        ]
    },
    {
        "name": "Unscented Body Butter",
        "link": "https://myemollient.com/collections/unscented",
        "imgUn": "https://myemollient.com/cdn/shop/files/Unscented_Body_Butter_for_Winter_Dry_Skin_1296x.jpg?v=1737604260",
        "imgDeux": "https://myemollient.com/cdn/shop/files/best-body-butter-dry-skin-jar-closed_1296x.jpg?v=1747158292",
        "descript": "No Fragrance.  No Fluff. Just powerful hydration for even the most sensitive skin.",
        "choices": [
            {
                "question": 0,
                "answer": 1,
                "score": 1
            },
            {
                "question": 0,
                "answer": 2,
                "score": 1
            },
            {
                "question": 0,
                "answer": 3,
                "score": 1
            },
            {
                "question": 1,
                "answer": 0,
                "score": 10
            },
            {
                "question": 1,
                "answer": 1,
                "score": 10
            },
            {
                "question": 4,
                "answer": 5,
                "score": 3
            }
        ]        
    },
    {
        "name": "Peppermint Body Butter",
        "link": "https://myemollient.com/collections/peppermint-body-butter",
        "imgUn": "https://myemollient.com/cdn/shop/files/Peppermint_body_butter_for_eczema_dry_skin_menopause_and_hot_flashes_1296x.jpg?v=1750775986",
        "imgDeux": "https://myemollient.com/cdn/shop/files/peppermint-butter-post-workout-recovery_1296x.jpg?v=1755051005",
        "descript": "Crafted for dry, menopausal, and sensitive skin (including skin that's easily irritated or eczema-prone), the peppermint-infused formula delivers a crisp, cooling sensation while locking in long-lasting moisture.",
        "choices": [
            {
                "question": 1,
                "answer": 3,
                "score": 1
            },
            {
                "question": 1,
                "answer": 6,
                "score": 1
            },
            {
                "question": 1,
                "answer": 7,
                "score": 10
            },
            {
                "question": 2,
                "answer": 1,
                "score": 1
            },
            {
                "question": 3,
                "answer": 0,
                "score": 1
            },
            {
                "question": 4,
                "answer": 0,
                "score": 3
            }
        ]  
    },
    {
        "name": "Jet Lag Set",
        "link": "",
        "imgUn": "",
        "imgDeux": "",
        "descript": "description",
        "choices": [
            {
                "question": 3,
                "answer": 2,
                "score": 3
            }
        ]        
    },
    {
        "name": "Eczema",
        "link": "",
        "imgUn": "",
        "imgDeux": "",
        "descript": "description",
        "choices": [
            {
                "question": 1,
                "answer": 0,
                "score": 1
            },
            {
                "question": 1,
                "answer": 1,
                "score": 1
            }
        ]
    }
]


function makeForm(){

    st = `<form id="slideshowForm">`; //start string
    
    for (let q = 0; q < questions.length; q++){ //iterate through questions
    
        if (q == 0){
            st+=  `<div class="slideActive" id="q${q}">`;
        }
        else{
            st+=  `<div class="slide" id="q${q}">`;
        }
        st += `<p class="question-text">${questions[q].question}</p>`; //quesiton
         st+= `<div class="options">`
        for (let a = 0; a < questions[q].answers.length; a++){
            let inputMode = ``;
            if (questions[q].question_mode == all_that_apply){
                inputMode = `checkbox`;
            } 
            else {
                inputMode = `radio`;
            }
            st+=`<input type = "${inputMode}" 
                id="q${q}a${a}" value="${questions[q].answers[a]}" name="q${q}">
                <label class="option-btn" for="q${q}a${a}">${questions[q].answers[a]}</label>    <br>`;
        }
            

        st += `</div>   </div>`;
    }

    st+=`   <div id="buttons" ></div>
    </form>`;

    document.getElementById("display").innerHTML = st; //insert code into HTML
}


let currentSlide = 0;

function makeButtons(){
    let nextButtonCode = ``;
    if (currentSlide == questions.length-1){ //if currentSlide is last slide
        nextButtonCode = `<button type="submit" class="prevNextButtons" id="submitButton">Submit</button>`;
    }
    else{
        nextButtonCode = `<button type="button" class="prevNextButtons" id="nextButton" onclick="changeSlide(1)">Next</button>`;
    }
    let prevButtonCode = ``;
    if (currentSlide == 0){ //if currentSlide is first slide
        prevButtonCode = `disabled="disabled"`      //disable prevButton
    }
    document.getElementById("buttons").innerHTML =
    `<div class="buttons">
        <button type="button" class="prevNextButtons" id="prevButton" onclick="changeSlide(-1)" ${prevButtonCode}>Back</button>
        ${nextButtonCode}
    </div>`;

    document.getElementById("slideshowForm").addEventListener("submit", function(e){
        e.preventDefault();
        //processing data===============================
        let formData = new FormData(slideshowForm);
        let formValuesList = []
        for (let [key, value] of formData.entries()) {
            formValuesList.push({ name: key, value: value });
        }
        //call function for making result and input processed data
        makeResult(formValuesList);
    })
}

function changeSlide(n){
    document.getElementById(`q${currentSlide}`).className = "slide";
    currentSlide += n;
    document.getElementById(`q${currentSlide}`).className="slideActive"
    makeButtons();
}

function makeResult(formValues) {
    let butter = null;
    let highestScore = 0;
    for (let product of products) {
        let score = 0;
        for (let choice of product.choices) {
            let choiceText = questions[choice.question].answers[choice.answer];
            for (let formValue of formValues) {
                if (formValue.value === choiceText) {
                    score += choice.score; // add the score
                }
            }
        }
        if (score > highestScore) {
            highestScore = score;
            butter = product;
        }
    }

    // display result
    if (butter != null) {
        let st = `
        <div class="cell-container">
            <div class="cell">
                <div class="imgs">
                    <a href=${butter.link}>
                        <img class="un" src=${butter.imgUn} alt="">
                        <img class="deux" src=${butter.imgDeux} alt="">
                        <a href=${butter.link} class="overlay-btn">SHOP CLEAN</a>
                    </a>
                </div>
            </div>
            <div class="descriptCell">
                <a class="name" href=${butter.link}>${butter.name}</a>
                <br>
                <p class="descript">${butter.descript}</p>
            </div>
        </div>`;
        document.getElementById("display").innerHTML = st;
    }
}

makeForm();
makeButtons();



</script>